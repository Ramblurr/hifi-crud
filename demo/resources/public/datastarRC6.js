// Datastar v1.0.0-RC.6
var dt=/ðŸ–•JS_DSðŸš€/.source,Te=dt.slice(0,5),te=dt.slice(4),N="datastar",mt="Datastar-Request",gt=1e3,yt="type module",bt=!1,ht=!1,St=!0,Oe="morph",vt="inner",Et="outer",Tt="prepend",At="append",xt="before",wt="after",Mt="upsertAttributes",Rt=Oe,He="datastar-merge-fragments",$e="datastar-merge-signals",Ge="datastar-remove-fragments",We="datastar-remove-signals",_e="datastar-execute-script";var B=e=>e.trim()==="true",K=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([a-z])([0-9]+)/gi,"$1-$2").replace(/([0-9]+)([a-z])/gi,"$1-$2").toLowerCase(),me=e=>K(e).replace(/-./g,t=>t[1].toUpperCase()),ge=e=>K(e).replace(/-/g,"_"),On=e=>me(e).replace(/^./,t=>t[0].toUpperCase()),Dt=e=>Function(`return Object.assign({}, ${e})`)(),z=e=>e.startsWith("$")?e.slice(1):e,Hn={kebab:K,snake:ge,pascal:On};function k(e,t){for(let n of t.get("case")||[]){let r=Hn[n];r&&(e=r(e))}return e}var $n="computed",Ct={type:"attribute",name:$n,keyReq:"must",valReq:"must",onLoad:({key:e,mods:t,genRX:n,computed:r,batch:s})=>{e=k(e,t);let{deps:a,rxFn:i}=n();s(()=>{r(a,i,e)})}};var V=`${N}-signal-change`;var we=new Set,Me=new Set,Re=new Set;function De(e){we.clear(),Me.clear(),Re.clear();let t=e();return(we.size||Me.size||Re.size)&&document.dispatchEvent(new CustomEvent(V,{detail:{added:[...we],removed:[...Me],updated:[...Re]}})),t}var O=[],X=new Map;function re(){return O}function ze(e){return X.get(e)}function Gn(e){let t=[],n=0,r=O.length-1,s=a=>a!==e&&!a.startsWith(`${e}.`);for(;n<=r;){let a=Math.floor((n+r)/2),i=O[a];if(i<e)n=a+1;else if(i>e)r=a-1;else{let o=a;do{let c=O[o];if(s(c))break;o--}while(o>=0);let l=a;do{let c=O[l];if(s(c))break;l++}while(l<O.length);for(let c=o+1;c<l;c++)t.push(O[c]);return t}}return t}function Lt(e,t){Xe(e),O.push(e),X.set(e,t),O.sort((n,r)=>r.length-n.length),we.add(e)}function G(e,t){let n=X.get(e);if(n){if(!(n instanceof ne))return;n.value=t}else he(t,e)}function se(e){return X.get(e)?.value}function oe(e,t){let n=!1,r=X.get(e);return r||(n=!0,r=he(t,e)),{dep:r,inserted:n}}function ie(e,t=!1){let n=Pt(e);for(let[r,s]of Object.entries(n))X.has(r)&&t||G(r,s)}function Xe(...e){for(let t of e){let n=Gn(t);for(let r of n){X.delete(r);let s=O.indexOf(r);s>-1&&O.splice(s,1),Me?.add(r)}}}function Ce(e=!0,t=!1){return JSON.stringify(Je(t),null,e?2:0)}function Je(e,...t){let n=new Map;for(let s of O)if(!(e&&s.match(/^_|\._/))){if(t.length>0){let a=!1;for(let i of t)if(s.startsWith(i)){a=!0;break}if(!a)continue}n.set(s,X.get(s)?.value)}return _n(n)}function Wn(e){return Object.prototype.toString.call(e)==="[object Object]"}function Pt(e,t=[],n="."){return Object.keys(e).reduce((r,s)=>Object.assign({},r,Wn(e[s])?Pt(e[s],t.concat([s]),n):{[t.concat([s]).join(n)]:e[s]}),{})}function _n(e,t="."){let n={};for(let[r,s]of e.entries()){let a=r.split(t),i=n;for(let o=0;o<a.length-1;o++){let l=a[o];i[l]||(i[l]={}),i=i[l]}i[a[a.length-1]]=s}return n}function kt(e,t,n,...r){return De(()=>e(...r,...n.map((s,a)=>t[a]?s:s.value)))}var Ae=[],ye=[],xe=0,be=0;function Qe(e,t){switch(e.length){case 0:return t;case 1:return()=>t(e[0].value);case 2:return()=>t(e[0].value,e[1].value);case 3:return()=>t(e[0].value,e[1].value,e[2].value);case 4:return()=>t(e[0].value,e[1].value,e[2].value,e[3].value)}let n=e.length;return Ae[n]||(Ae[n]=Array(n)),()=>{for(let r=0;r<n;r++)Ae[n][r]=e[r].value;return t(...Ae[n])}}function qe(e){e.flags&=-249;let t=e.currentValue,n=e.getter();return t!==n?(e.currentValue=n,!0):!1}function qn(e){let t=e.flags;return(t&32||t&64&&jn(e,t))&&(e.flags&=-249,e.run()),!0}function jn(e,t){return Nt(e.deps)?(e.flags=t|32,!0):(e.flags=t&-65,!1)}function he(e,t){return new ne(e,t)}var ne=class{constructor(t,n){this.currentValue=t;this.path=n;n&&Lt(n,this)}get value(){return this.currentValue}set value(t){if(this.currentValue!==t&&(this.currentValue=t,this.path&&Re.add(this.path),this.subs)){let n=this.subs,r=n.nextSub,s,a=0,i=32;e:do{let o=n.sub,l=o.flags,c=!1;if(l&244?l&16&&!(l&4)?(o.flags=l&-17|i|8,c=!0):!(l&224)&&Be(n,o)&&(o.flags=l|16|i|8,c=!!o.subs):(o.flags=l|i|8,c=!0),c){let u=o.subs;if(u){n=u,u.nextSub?(s={target:r,linked:s},++a,r=n.nextSub,i=64):i=l&2?128:64;continue}l&2&&(ye[be++]=o)}else l&(4|i)?!(l&i)&&l&224&&Be(n,o)&&(o.flags=l|i):(o.flags=l|i|8,(l&10)===2&&(ye[be++]=o));if(n=r){r=n.nextSub,i=a?64:32;continue}for(;a--;)if(n=s.target,s=s.linked,n){r=n.nextSub,i=a?64:32;continue e}break}while(!0);for(;xe<be;){let o=ye[xe];ye[xe++]=void 0,qn(o)||(o.flags&=-9)}xe=0,be=0}}};function Ye(e,t,n){return new je(e,Qe(e,t),n)}var je=class{constructor(t,n,r){this.path=r;this.flags=33;this.getter=Qe(t,n),r&&Lt(r,this);for(let s of t)Ft(s,this)}get value(){let t=this.flags;if(t&96)if(t&32||Nt(this.deps)){if(qe(this)){let n=this.subs;n&&Ke(n)}}else this.flags=t&-65;return this.currentValue}};function Ze(e,t){let n=new Ue(e,t);return()=>n.dispose()}var Ue=class{constructor(t,n){this.flags=2;for(let r of t)Ft(r,this);this.run=Qe(t,n),this.run()}dispose(){if(this.depsTail=void 0,this.flags&=-249,this.deps){let t=this.deps;do{let n=t.dep,r=t.nextDep,s=t.nextSub,a=t.prevSub;if(s?s.prevSub=a:n.subsTail=a,a?a.nextSub=s:n.subs=s,!n.subs&&"deps"in n){let i=n.flags;i&32||(n.flags=i|32);let o=n.deps;if(o){t=o,n.depsTail.nextDep=r,n.deps=void 0,n.depsTail=void 0;continue}}t=r}while(t);this.deps=void 0}}};function Ft(e,t){let n=t.depsTail;if(n&&n.dep===e)return;let r=n?n.nextDep:t.deps;if(r&&r.dep===e){t.depsTail=r;return}let s=e.subsTail;if(s&&s.sub===t&&Be(s,t))return;let a={dep:e,sub:t,nextDep:r,prevSub:void 0,nextSub:void 0};if(n?n.nextDep=a:t.deps=a,!e.subs)e.subs=a;else{let i=e.subsTail;a.prevSub=i,i.nextSub=a}return t.depsTail=a,e.subsTail=a,a}function Nt(e){let t,n=0,r;e:do{r=!1;let s=e.dep;if(e.sub.flags&32)r=!0;else if("flags"in s){let a=s.flags;if((a&33)===33){if(qe(s)){let i=s.subs;i.nextSub&&Ke(i),r=!0}}else if((a&65)===65){(e.nextSub||e.prevSub)&&(t={target:e,linked:t}),e=s.deps,++n;continue}}if(!r&&e.nextDep){e=e.nextDep;continue}for(;n;){--n;let a=e.sub,i=a.subs;if(r){if(qe(a)){i.nextSub?(e=t.target,t=t.linked,Ke(i)):e=i;continue}}else a.flags&=-65;if(i.nextSub?(e=t.target,t=t.linked):e=i,e.nextDep){e=e.nextDep;continue e}r=!1}return r}while(!0)}function Ke(e){do{let t=e.sub,n=t.flags;(n&96)===64&&(t.flags=n|32|8,(n&10)===2&&(ye[be++]=t)),e=e.nextSub}while(e)}function Be(e,t){let n=t.depsTail;if(n){let r=t.deps;do{if(r===e)return!0;if(r===n)break;r=r.nextDep}while(r)}return!1}var Vt={type:"attribute",name:"signals",onLoad:e=>{let{key:t,mods:n,value:r,genRX:s,evalRX:a,batch:i}=e,{deps:o,dm:l,rxFn:c}=s(),u=n.has("ifmissing");if(t!==""){let p=k(t,n),f=r===""?r:a(c,l,o);i(()=>{u?oe(p,f):G(p,f)})}else{let p=a(c,l,o);i(()=>{ie(p,u)})}}};function Le(e){return e instanceof HTMLElement||e instanceof SVGElement}function ae(e,t){let n=J?`data-${J}-ignore`:"data-ignore",r=`${n}__self`;if(!Le(e)||e.closest(`[${n}]`))return;let s=document.createTreeWalker(e,1);for(;e;){if(Le(e)){if(e.hasAttribute(n)){e=s.nextSibling();continue}e.hasAttribute(r)||t(e)}e=s.nextNode()}}var Un="https://data-star.dev/errors";function It(e,t,n={}){let r=new Error;r.name=`${N} ${e} error`;let s=ge(t),a=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),i=JSON.stringify(n,null,2);return r.message=`${t}
More info: ${Un}/${e}/${s}?${a}
Context: ${i}`,r}function H(e,t,n={}){let r={plugin:{name:t.plugin.name,type:t.plugin.type}};return It("init",e,Object.assign(r,n))}function E(e,t,n={}){let r={plugin:{name:t.plugin.name,type:t.plugin.type},element:{id:t.el.id,tag:t.el.tagName},expression:{rawKey:t.rawKey,key:t.key,value:t.value,validSignals:re(),fnContent:t.fnContent}};return It("runtime",e,Object.assign(r,n))}var Se={},tt=[],le=new Map,et=null,J="";function Ot(e){J=e}function Pe(...e){for(let t of e){let n={plugin:t,actions:Se,removals:le,applyToElement:ke,batch:De,signal:he,computed:Ye,effect:Ze},r=t.type;if(r==="action")Se[t.name]=t;else if(r==="attribute")tt.push(t),t.onGlobalInit?.(n);else if(r==="watcher")t.onGlobalInit?.(n);else throw H("InvalidPluginType",n)}tt.sort((t,n)=>{let r=n.name.length-t.name.length;return r!==0?r:t.name.localeCompare(n.name)})}function nt(){queueMicrotask(()=>{ae(document.documentElement,ke),et||(et=new MutationObserver(Kn),et.observe(document.body,{subtree:!0,childList:!0,attributes:!0}))})}function Kn(e){let t=new Set;for(let{target:r,type:s,addedNodes:a,removedNodes:i}of e)switch(s){case"childList":{for(let o of i)ae(o,l=>{let c=le.get(l);if(le.delete(l)){for(let u of c.values())u();c.clear()}});for(let o of a)ae(o,l=>t.add(l))}break;case"attributes":{if(!Le(r)||r.closest(`[${J?`data-${J}-ignore`:"data-ignore"}]`))continue;t.add(r);break}}let n=Array.from(t);n.sort((r,s)=>r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1);for(let r of n)ke(r)}function Ht(e){let t=5831,n=e.length;for(;n--;)t+=(t<<5)+e.charCodeAt(n);return(t>>>0).toString(36)}function ke(e){let t=[],n=le.get(e)||new Map,r=new Map(n);for(let[s,a]of Object.entries(e.dataset)){if(!s.startsWith(J))continue;let i=Ht(`${s}${a}`);r.delete(i)||t.push({key:s,value:a,hash:i})}for(let[s,a]of r)a(),n.delete(s);for(let{key:s,value:a,hash:i}of t){let o=Bn(e,s,a);o&&n.set(i,o)}n.size&&le.set(e,n)}function Bn(e,t,n){let r=me(t.slice(J.length)),s=tt.find(f=>RegExp(`^${f.name}([A-Z]|_|$)`).test(r));if(!s)return;let[a,...i]=r.slice(s.name.length).split(/\_\_+/),o=!!a;o&&(a=me(a));let l=!!n,c={applyToElement:ke,actions:Se,removals:le,genRX:()=>zn(c,...s.argNames||[]),plugin:s,el:e,rawKey:r,key:a,value:n,mods:new Map,batch:De,signal:he,computed:Ye,effect:Ze,evalRX:kt},u=s.keyReq||"allowed";if(o){if(u==="denied")throw E(`${s.name}KeyNotAllowed`,c)}else if(u==="must")throw E(`${s.name}KeyRequired`,c);let p=s.valReq||"allowed";if(l){if(p==="denied")throw E(`${s.name}ValueNotAllowed`,c)}else if(p==="must")throw E(`${s.name}ValueRequired`,c);if(u==="exclusive"||p==="exclusive"){if(o&&l)throw E(`${s.name}KeyAndValueProvided`,c);if(!o&&!l)throw E(`${s.name}KeyOrValueRequired`,c)}for(let f of i){let[g,...m]=f.split(".");c.mods.set(me(g),new Set(m.map(w=>w.toLowerCase())))}return s.onLoad(c)}function zn(e,...t){let n=[],r=new Set,s="",a=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|\(\s*((function)\s*\(\s*\)|(\(\s*\))\s*=>)\s*(?:\{[\s\S]*?\}|[^;)\{]*)\s*\)\s*\(\s*\)|[^;])+/gm,i=e.value.trim().match(a);if(i){let y=i.length-1,b=i[y].trim();b.startsWith("return")||(i[y]=`return (${b});`),s=i.join(`;
`)}let o=new Map,l=RegExp(`(?:${Te})(.*?)(?:${te})`,"gm");for(let y of s.matchAll(l)){let b=y[1],S=`dsEscaped${Ht(b)}`;o.set(S,b),s=s.replace(Te+b+te,S)}let c=(y,b)=>`${y}${ge(b).replaceAll(/\./g,"_")}`,u=new Set(t),p=re();if(p.length){let y=p.join("|"),b=RegExp(`\\$(${y})(\\s*[+&^\\/*|-]?=[^=]|\\+\\+|--)`,"gm"),S=[...s.matchAll(b)],D=(R,F,d="")=>{let T=RegExp(`\\$${R[1]}(?![A-Za-z0-9_-])`,"gm");s=s.replaceAll(T,F+d)};if(S.length){let R=`${N}Mut_`,F=new Set;for(let d of S){let T=d[1],h=ze(T),x=c(R,T);h&&!F.has(h)&&(r.add(h),F.add(h),n.push(!0),u.add(x)),D(d,x,".value")}}let I=RegExp(`\\$(${y})(\\W|$)`,"gm"),M=[...s.matchAll(I)];if(M.length){let R=`${N}Pure_`,F=new Set;for(let d of M){let T=d[1],h=ze(T),x=c(R,T);h&&!F.has(h)&&(r.add(h),F.add(h),n.push(!1),u.add(x)),D(d,x)}}}let f=new Set,g=RegExp(`@(${Object.keys(Se).join("|")})\\(`,"gm"),m=[...s.matchAll(g)],w=new Set;if(m.length){let y=`${N}Act_`;for(let b of m){let S=b[1],D=Se[S];if(!D)continue;f.add(S);let I=c(y,S);u.add(I),s=s.replace(`@${S}(`,`${I}(`),w.add((...M)=>D.fn(e,...M))}}for(let[y,b]of o)s=s.replace(y,b);e.fnContent=s;try{let y=Function("el",...u,s);return{dm:n,deps:[...r],rxFn:(...b)=>{try{return y(e.el,...b,...w)}catch(S){throw E("ExecuteExpression",e,{error:S.message})}}}}catch(y){throw E("GenerateExpression",e,{error:y.message})}}Pe(Vt,Ct);var Q=`${N}-sse`,Fe="started",Ne="finished",$t="error",Gt="retrying",Wt="retrying";function q(e,t){document.addEventListener(Q,n=>{if(n.detail.type!==e)return;let{argsRaw:r}=n.detail;t(r)})}function ce(e,t,n){document.dispatchEvent(new CustomEvent(Q,{detail:{type:e,el:t,argsRaw:n}}))}var _t=e=>`${e}`.includes("text/event-stream"),qt=e=>e==="GET",j=async(e,t,n,r)=>{let{el:s,evt:a}=e,{headers:i,contentType:o,includeLocal:l,excludeSignals:c,selector:u,openWhenHidden:p,retryInterval:f,retryScaler:g,retryMaxWaitMs:m,retryMaxCount:w,abort:y}=Object.assign({headers:{},contentType:"json",includeLocal:!1,excludeSignals:!1,selector:null,openWhenHidden:!1,retryInterval:gt,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),b=t.toLowerCase(),S=()=>{};try{if(!n?.length)throw E("SseNoUrlProvided",e,{action:b});let D={};D[mt]=!0,o==="json"&&(D["Content-Type"]="application/json");let I=Object.assign({},D,i),M={method:t,headers:I,openWhenHidden:p,retryInterval:f,retryScaler:g,retryMaxWaitMs:m,retryMaxCount:w,signal:y,onopen:async d=>{if(d.status>=400){let T=d.status.toString();ce($t,s,{status:T})}},onmessage:d=>{if(!d.event.startsWith(N))return;let T=d.event,h={},x=d.data.split(`
`);for(let A of x){let L=A.indexOf(" "),P=A.slice(0,L),C=h[P];C||(C=[],h[P]=C);let W=A.slice(L+1);C.push(W)}let v={};for(let[A,L]of Object.entries(h))v[A]=L.join(`
`);ce(T,s,v)},onerror:d=>{if(_t(d))throw E("InvalidContentType",e,{url:n});d&&(console.error(d.message),ce(Gt,s,{message:d.message}))}},R=new URL(n,window.location.href),F=new URLSearchParams(R.search);if(o==="json"){if(!c){let d=Ce(!1,!l);qt(t)?F.set(N,d):M.body=d}}else if(o==="form"){let d=u?document.querySelector(u):s.closest("form");if(d===null)throw u?E("SseFormNotFound",e,{action:b,selector:u}):E("SseClosestFormNotFound",e,{action:b});if(!d.checkValidity()){d.reportValidity(),S();return}let T=new FormData(d),h=s;if(s===d)a instanceof SubmitEvent&&(h=a.submitter);else{let A=L=>L.preventDefault();d.addEventListener("submit",A),S=()=>d.removeEventListener("submit",A)}if(h instanceof HTMLButtonElement){let A=h.getAttribute("name");A&&T.append(A,h.value)}let x=d.getAttribute("enctype")==="multipart/form-data";x||(I["Content-Type"]="application/x-www-form-urlencoded");let v=new URLSearchParams(T);if(qt(t))for(let[A,L]of v)F.append(A,L);else x?M.body=T:M.body=v}else throw E("SseInvalidContentType",e,{action:b,contentType:o});ce(Fe,s,{}),R.search=F.toString();try{await er(R.toString(),s,M)}catch(d){if(!_t(d))throw E("SseFetchFailed",e,{method:t,url:n,error:d})}}finally{ce(Ne,s,{}),S()}};async function Xn(e,t){let n=e.getReader(),r;for(r=await n.read();!r.done;)t(r.value),r=await n.read()}function Jn(e){let t,n,r,s=!1;return function(i){t===void 0?(t=i,n=0,r=-1):t=Yn(t,i);let o=t.length,l=0;for(;n<o;){s&&(t[n]===10&&(l=++n),s=!1);let c=-1;for(;n<o&&c===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-l);break;case 13:s=!0;case 10:c=n;break}if(c===-1)break;e(t.subarray(l,c),r),l=n,r=-1}l===o?t=void 0:l!==0&&(t=t.subarray(l),n-=l)}}function Qn(e,t,n){let r=jt(),s=new TextDecoder;return function(i,o){if(i.length===0)n?.(r),r=jt();else if(o>0){let l=s.decode(i.subarray(0,o)),c=o+(i[o+1]===32?2:1),u=s.decode(i.subarray(c));switch(l){case"data":r.data=r.data?`${r.data}
${u}`:u;break;case"event":r.event=u;break;case"id":e(r.id=u);break;case"retry":{let p=Number.parseInt(u,10);Number.isNaN(p)||t(r.retry=p);break}}}}}function Yn(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function jt(){return{data:"",event:"",id:"",retry:void 0}}var Zn="text/event-stream",Ut="last-event-id";function er(e,t,{signal:n,headers:r,onopen:s,onmessage:a,onclose:i,onerror:o,openWhenHidden:l,fetch:c,retryInterval:u=1e3,retryScaler:p=2,retryMaxWaitMs:f=3e4,retryMaxCount:g=10,...m}){return new Promise((w,y)=>{let b=0,S={...r};S.accept||(S.accept=Zn);let D;function I(){D.abort(),document.hidden||T()}l||document.addEventListener("visibilitychange",I);let M=0;function R(){document.removeEventListener("visibilitychange",I),window.clearTimeout(M),D.abort()}n?.addEventListener("abort",()=>{R(),w()});let F=c??window.fetch,d=s??function(){};async function T(){D=new AbortController;try{let h=await F(e,{...m,headers:S,signal:D.signal});await d(h),await Xn(h.body,Jn(Qn(x=>{x?S[Ut]=x:delete S[Ut]},x=>{u=x},a))),i?.(),R(),w()}catch(h){if(!D.signal.aborted)try{let x=o?.(h)??u;window.clearTimeout(M),M=window.setTimeout(T,x),u*=p,u=Math.min(u,f),b++,b>=g?(ce(Wt,t,{}),R(),y("Max retries reached.")):console.error(`Datastar failed to reach ${e.toString()} retrying in ${x}ms.`)}catch(x){R(),y(x)}}}T()})}var Kt={type:"action",name:"delete",fn:async(e,t,n)=>j(e,"DELETE",t,{...n})};var Bt={type:"action",name:"get",fn:async(e,t,n)=>j(e,"GET",t,{...n})};var zt={type:"action",name:"patch",fn:async(e,t,n)=>j(e,"PATCH",t,{...n})};var Xt={type:"action",name:"post",fn:async(e,t,n)=>j(e,"POST",t,{...n})};var Jt={type:"action",name:"put",fn:async(e,t,n)=>j(e,"PUT",t,{...n})};var Qt={type:"watcher",name:_e,onGlobalInit:async e=>{q(_e,({autoRemove:t=`${St}`,attributes:n=yt,script:r})=>{let s=B(t);if(!r?.length)throw H("NoScriptProvided",e);let a=document.createElement("script");for(let i of n.split(`
`)){let o=i.indexOf(" "),l=o?i.slice(0,o):i,c=o?i.slice(o):"";a.setAttribute(l.trim(),c.trim())}a.text=r,document.head.appendChild(a),s&&a.remove()})}};var ve=document,Ee=!!ve.startViewTransition;function U(e,t){if(t.has("viewtransition")&&Ee){let n=e;e=(...r)=>document.startViewTransition(()=>n(...r))}return e}var ln="div",rt="value",it=e=>document.createElement(e),cn=()=>it(ln),tr=e=>`<${e}></${e}>`,Yt=e=>[...e.querySelectorAll("[id]")],un=e=>e instanceof Element,Zt=e=>e instanceof HTMLTemplateElement,en=e=>e instanceof HTMLInputElement,tn=e=>e instanceof HTMLTextAreaElement,nn=e=>e instanceof HTMLOptionElement,pn={type:"watcher",name:He,onGlobalInit:async e=>{let t=it("template");q(He,({fragments:n=tr(ln),selector:r="",mergeMode:s=Rt,useViewTransition:a="false"})=>{let i=B(a);t.innerHTML=n.trim();for(let o of[...t.content.children]){if(!un(o))throw H("NoFragmentsFound",e);let l=r||`#${o.getAttribute("id")}`,c=document.querySelectorAll(l);if(!c.length)throw H("NoTargetsFound",e,{selectorOrID:l});i&&Ee?ve.startViewTransition(()=>rn(e,s,o,c)):rn(e,s,o,c)}})}};function rn(e,t,n,r){for(let s of r){let a=n.cloneNode(!0);switch(t){case Oe:{rr(s,a),ae(s,i=>{let o=e.removals.get(i);if(e.removals.delete(i)){for(let l of o.values())l();o.clear()}e.applyToElement(i)});break}case vt:s.innerHTML=a.outerHTML;break;case Et:s.replaceWith(a);break;case Tt:s.prepend(a);break;case At:s.append(a);break;case xt:s.before(a);break;case wt:s.after(a);break;case Mt:for(let i of a.getAttributeNames()){let o=a.getAttribute(i);s.setAttribute(i,o)}break;default:throw H("InvalidMergeMode",e,{mergeMode:t})}}}var pe=cn();pe.hidden=!0;var Ve,$=new Map,ue=new Set,nr=pe.moveBefore!==void 0;function rr(e,t){let n=cn();n.append(t);let r=Yt(n),s=Yt(e);e.id&&s.push(e);let a=new Set,i=new Map;for(let{id:f,tagName:g}of s)i.has(f)?a.add(f):i.set(f,g);ue.clear();for(let{id:f,tagName:g}of r)ue.has(f)?a.add(f):i.get(f)===g&&ue.add(f);for(let f of a)ue.delete(f);$.clear(),an(e.parentElement,s),an(n,r),document.body.insertAdjacentElement("afterend",pe),Ve=e;let o=e.parentNode,l=e.previousSibling,c=e.nextSibling;fn(o,n,e,c);let u=[],p=l?.nextSibling||o.firstChild;for(;p&&p!==c;)u.push(p),p=p.nextSibling;return pe.remove(),u}function fn(e,t,n=null,r=null){Zt(e)&&Zt(t)&&(e=e.content,t=t.content),n??=e.firstChild;for(let s of t.childNodes){if(n&&n!==r){let i=sr(s,n,r);if(i){if(i!==n){let o=n;for(;o&&o!==i;){let l=o;o=o.nextSibling,on(l)}}st(i,s),n=i.nextSibling;continue}}if(un(s)&&ue.has(s.id)){let i=s.id,o=`[id="${i}"]`,l=p=>p.querySelector(o),c=Ve.id===i&&Ve||l(Ve)||l(pe),u=c;for(;u=u.parentNode;){let p=$.get(u);p&&(p.delete(c.id),p.size||$.delete(u))}dn(e,c,n),st(c,s),n=c.nextSibling;continue}if($.has(s)){let i=it(s.tagName);return e.insertBefore(i,n),st(i,s),i}let a=document.importNode(s,!0);e.insertBefore(a,n)}for(;n&&n!==r;){let s=n;n=n.nextSibling,on(s)}}function sr(e,t,n){let r=null,s=e.nextSibling,a=0,i=0,o=$.get(e)?.size||0,l=t;for(;l&&l!==n;){if(sn(l,e)){let c=!1,u=$.get(l),p=$.get(e);if(p&&u){for(let f of u)if(p.has(f)){c=!0;break}}if(c)return l;if(!r&&!$.has(l)){if(!o)return l;r=l}}if(i+=$.get(l)?.size||0,i>o||(r===null&&s&&sn(l,s)&&(a++,s=s.nextSibling,a>=2&&(r=void 0)),l.contains(document.activeElement)))break;l=l.nextSibling}return r||null}function sn(e,t){let n=e,r=t;return n.nodeType===r.nodeType&&n.tagName===r.tagName&&(!n.id||n.id===r.id)}function on(e){$.has(e)?dn(pe,e,null):e.parentNode?.removeChild(e)}function dn(e,t,n=null){nr?e.moveBefore(t,n):e.insertBefore(t,n)}function st(e,t){let n=t.nodeType,r=e,s=t;if(n===1){let a=r.attributes,i=s.attributes;for(let o of i)r.getAttribute(o.name)!==o.value&&r.setAttribute(o.name,o.value);for(let o=a.length-1;0<=o;o--){let l=a[o];l&&(s.hasAttribute(l.name)||r.removeAttribute(l.name))}if(en(r)&&en(s)&&s.type!=="file"){let o=s.value,l=r.value;ot(r,s,"checked"),ot(r,s,"disabled"),Object.keys(s.dataset||{}).some(u=>u.startsWith("bind"))||(s.hasAttribute(rt)?l!==o&&(r.setAttribute(rt,o),r.value=o):(r.value="",r.removeAttribute(rt)))}else if(nn(r)&&nn(s))ot(r,s,"selected");else if(tn(r)&&tn(s)){let o=s.value,l=r.value;o!==l&&(r.value=o),r.firstChild&&r.firstChild.nodeValue!==o&&(r.firstChild.nodeValue=o)}}return(n===8||n===3)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),r.innerHTML!==s.innerHTML&&fn(r,s),e}function ot(e,t,n){let r=t,s=e,a=r[n],i=s[n];a!==i&&(s[n]=r[n],a?e.setAttribute(n,""):e.removeAttribute(n))}function an(e,t){for(let n of t)if(ue.has(n.id)){let r=n;for(;r&&r!==e;){let s=$.get(r);s||(s=new Set,$.set(r,s)),s.add(n.id),r=r.parentElement}}}var mn={type:"watcher",name:$e,onGlobalInit:async({batch:e})=>{q($e,({signals:t="{}",onlyIfMissing:n=`${ht}`})=>{let r=B(n),s=Dt(t);e(()=>ie(s,r))})}};var gn={type:"watcher",name:Ge,onGlobalInit:async e=>{q(Ge,({selector:t,useViewTransition:n=`${bt}`})=>{if(!t.length)throw H("NoSelectorProvided",e);let r=B(n),s=document.querySelectorAll(t),a=()=>{for(let i of s)i.remove()};r&&Ee?ve.startViewTransition(()=>a()):a()})}};var yn={type:"watcher",name:We,onGlobalInit:async e=>{let{batch:t}=e;q(We,({paths:n=""})=>{let r=n.split(`
`).map(s=>s.trim());if(!r?.length)throw H("NoPathsProvided",e);t(()=>{Xe(...r)})})}};var bn={type:"attribute",name:"attr",valReq:"must",onLoad:({el:e,key:t,genRX:n,computed:r,effect:s})=>{let{deps:a,rxFn:i}=n(),o=(c,u)=>{u===""||u===!0?e.setAttribute(c,""):u===!1||u===null||u===void 0?e.removeAttribute(c):e.setAttribute(c,u)};if(t===""){let c=r(a,i);return s([c],u=>{for(let[p,f]of Object.entries(u))o(p,f)})}t=K(t);let l=r(a,i);return s([l],c=>{o(t,c)})}};var or=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,hn=["change","input","keydown"],Sn={type:"attribute",name:"bind",keyReq:"exclusive",valReq:"exclusive",onLoad:e=>{let{el:t,key:n,mods:r,value:s,effect:a,batch:i}=e,o=t,l=n?k(n,r):z(s),c=t.tagName.toLowerCase(),u=c.includes("input"),p=c.includes("select"),f=t.getAttribute("type"),g=t.hasAttribute("value"),m="",w=u&&f==="checkbox";w&&(o.hasAttribute("checked")?m=g?o.value:!0:m=g?"":!1);let y=u&&f==="number";y&&(m=0);let b=u&&f==="radio";b&&(t.getAttribute("name")?.length||t.setAttribute("name",l));let S=u&&f==="file",{dep:D,inserted:I}=i(()=>oe(l,m)),M=-1;Array.isArray(D.value)&&(t.getAttribute("name")===null&&t.setAttribute("name",l),M=[...document.querySelectorAll(`[name="${l}"]`)].findIndex(v=>v===e.el));let R=M>=0,F=()=>[...se(l)],d=()=>{let v=se(l);R&&!p&&(v=v[M]||m);let A=`${v}`;if(w||b)typeof v=="boolean"?o.checked=v:o.checked=A===o.value;else if(p){let L=t;if(L.multiple){if(!R)throw E("BindSelectMultiple",e);for(let P of L.options){if(P?.disabled)continue;let C=y?Number(P.value):P.value;P.selected=v.includes(C)}}else L.value=A}else S||("value"in t?t.value=A:t.setAttribute("value",A))},T=async()=>{let v=se(l);if(R){let C=v;for(;M>=C.length;)C.push(m);v=C[M]||m}let A=(C,W)=>{let _=W;R&&!p&&!S&&(_=F(),_[M]=W),G(C,_)};if(S){let C=[...o?.files||[]],W=[],_=[],pt=[];await Promise.all(C.map(ft=>new Promise(In=>{let Z=new FileReader;Z.onload=()=>{if(typeof Z.result!="string")throw E("InvalidFileResultType",e,{resultType:typeof Z.result});let Ie=Z.result.match(or);if(!Ie?.groups)throw E("InvalidDataUri",e,{result:Z.result});W.push(Ie.groups.contents),_.push(Ie.groups.mime),pt.push(ft.name)},Z.onloadend=()=>In(void 0),Z.readAsDataURL(ft)}))),i(()=>{A(l,W),A(`${l}Mimes`,_),A(`${l}Names`,pt)});return}let L=o.value||"",P;if(w){let C=o.checked;g?P=C?L:"":P=C}else if(p){let W=[...t.selectedOptions];R?P=W.filter(_=>_.selected).map(_=>_.value):P=W[0]?.value||m}else typeof v=="boolean"?P=!!L:typeof v=="number"?P=Number(L):P=L||"";i(()=>{A(l,P)})};I&&T();for(let v of hn)t.addEventListener(v,T);let h=v=>{v.persisted&&T()};window.addEventListener("pageshow",h);let x=a([D],()=>d());return()=>{x();for(let v of hn)t.removeEventListener(v,T);window.removeEventListener("pageshow",h)}}};var vn={type:"attribute",name:"class",valReq:"must",onLoad:({el:e,key:t,mods:n,genRX:r,computed:s,effect:a})=>{let i=e.classList,{deps:o,rxFn:l}=r(),c=s(o,l);return a([c],u=>{if(t===""){let p=u;for(let[f,g]of Object.entries(p)){let m=f.split(/\s+/);g?i.add(...m):i.remove(...m)}}else{let p=K(t);p=k(p,n),u?i.add(p):i.remove(p)}})}};var En={type:"attribute",name:"indicator",keyReq:"exclusive",valReq:"exclusive",onLoad:e=>{let{el:t,key:n,mods:r,value:s,batch:a}=e,i=n?k(n,r):z(s),{dep:o}=a(()=>oe(i,!1));if(!(o instanceof ne))throw E("not_signal",e,{signalName:i});let l=c=>{let{type:u,el:p}=c.detail;if(p===t)switch(u){case Fe:o.value=!0;break;case Ne:o.value=!1;break}};return document.addEventListener(Q,l),()=>{o.value=!1,document.removeEventListener(Q,l)}}};var Tn={type:"attribute",name:"jsonSignals",keyReq:"denied",valReq:"denied",onLoad:e=>{let{el:t}=e;t instanceof HTMLElement||E("JsonSignalsInvalidElement",e);let n=()=>{t.textContent=Ce(!0)};return n(),document.addEventListener(V,n),()=>{document.removeEventListener(V,n)}}};function Y(e){if(!e||e.size<=0)return 0;for(let t of e){if(t.endsWith("ms"))return Number(t.replace("ms",""));if(t.endsWith("s"))return Number(t.replace("s",""))*1e3;try{return Number.parseFloat(t)}catch{}}return 0}function ee(e,t,n=!1){return e?e.has(t.toLowerCase()):n}function at(e,t){return(...n)=>{setTimeout(()=>{e(...n)},t)}}function ir(e,t,n=!1,r=!0){let s=-1,a=()=>s&&clearTimeout(s);return(...i)=>{a(),n&&!s&&e(...i),s=setTimeout(()=>{r&&e(...i),a()},t)}}function ar(e,t,n=!0,r=!1){let s=!1;return(...a)=>{s||(n&&e(...a),s=!0,setTimeout(()=>{s=!1,r&&e(...a)},t))}}function fe(e,t){let n=t.get("delay");if(n){let a=Y(n);e=at(e,a)}let r=t.get("debounce");if(r){let a=Y(r),i=ee(r,"leading",!1),o=!ee(r,"notrail",!1);e=ir(e,a,i,o)}let s=t.get("throttle");if(s){let a=Y(s),i=!ee(s,"noleading",!1),o=ee(s,"trail",!1);e=ar(e,a,i,o)}return e}var An={type:"attribute",name:"on",keyReq:"must",valReq:"must",argNames:["evt"],onLoad:e=>{let{el:t,key:n,mods:r,genRX:s,evalRX:a}=e,i=t;r.has("window")&&(i=window);let{dm:o,deps:l,rxFn:c}=s(),u=m=>{if(m){if(r.has("prevent")&&m.preventDefault(),r.has("stop")&&m.stopPropagation(),!(m.isTrusted||m instanceof CustomEvent||r.has("trust")))return;e.evt=m}a(c,o,l,m)};u=fe(u,r),u=U(u,r);let p={capture:!1,passive:!1,once:!1};if(r.has("capture")&&(p.capture=!0),r.has("passive")&&(p.passive=!0),r.has("once")&&(p.once=!0),r.has("outside")){i=document;let m=u;u=w=>{let y=w?.target;t.contains(y)||m(w)}}let g=K(n);if(g=k(g,r),(g===Q||g===V)&&(i=document),t instanceof HTMLFormElement&&g==="submit"){let m=u;u=w=>{w?.preventDefault(),m(w)}}return i.addEventListener(g,u,p),()=>{i.removeEventListener(g,u)}}};var lt=new WeakSet,xn={type:"attribute",name:"onIntersect",keyReq:"denied",onLoad:({el:e,mods:t,genRX:n,evalRX:r})=>{let{dm:s,deps:a,rxFn:i}=n(),o=()=>r(i,s,a);o=fe(o,t),o=U(o,t);let l={threshold:0};t.has("full")?l.threshold=1:t.has("half")&&(l.threshold=.5);let c=new IntersectionObserver(u=>{for(let p of u)p.isIntersecting&&(o(),lt.has(e)&&c.disconnect())},l);return c.observe(e),t.has("once")&&lt.add(e),()=>{t.has("once")||lt.delete(e),c.disconnect()}}};var wn={type:"attribute",name:"onInterval",keyReq:"denied",valReq:"must",onLoad:({mods:e,genRX:t,evalRX:n})=>{let{dm:r,deps:s,rxFn:a}=t(),i=()=>n(a,r,s);i=U(i,e);let o=1e3,l=e.get("duration");l&&(o=Y(l),ee(l,"leading",!1)&&i());let c=setInterval(i,o);return()=>{clearInterval(c)}}};var ct=new WeakSet,Mn={type:"attribute",name:"onLoad",keyReq:"denied",valReq:"must",onLoad:({el:e,mods:t,genRX:n,evalRX:r})=>{let{dm:s,deps:a,rxFn:i}=n(),o=()=>r(i,s,a);o=U(o,t);let l=0,c=t.get("delay");return c&&(l=Y(c)),o=at(o,l),ct.has(e)||o(),t.has("once")&&ct.add(e),()=>{t.has("once")||ct.delete(e)}}};function ut(e,t,n=!1){t=t.replaceAll(".","\\.").replaceAll("**",te).replaceAll("*","[^\\.]*").replaceAll(te,".*");let r=RegExp(`^${t}$`).test(e);return n?!r:r}function de(e){let t=[],n=e.split(/\s+/).filter(r=>r!=="");n=n.map(r=>z(r));for(let r of n)for(let s of re())ut(s,r)&&t.push(s);return t}var Rn={type:"attribute",name:"onSignalChange",valReq:"must",argNames:["evt"],onLoad:({key:e,mods:t,genRX:n,evalRX:r})=>{let{dm:s,deps:a,rxFn:i}=n(),o=c=>r(i,s,a,c);o=fe(o,t),o=U(o,t);let l=c=>{if(e!==""){let u=!1,p=k(e,t);p.endsWith("!")&&(u=!0,p=p.slice(0,-1));let{added:f,removed:g,updated:m}=c.detail;if(![...f,...g,...m].some(w=>ut(w,p,u)))return}o(c)};return document.addEventListener(V,l),()=>{document.removeEventListener(V,l)}}};var Dn={type:"attribute",name:"ref",keyReq:"exclusive",valReq:"exclusive",onLoad:({el:e,key:t,mods:n,value:r,batch:s})=>{let a=t?k(t,n):z(r);s(()=>{G(a,e)})}};var Cn="none",Ln="display",Pn={type:"attribute",name:"show",keyReq:"denied",valReq:"must",onLoad:({el:{style:e},genRX:t,computed:n,effect:r})=>{let{deps:s,rxFn:a}=t(),i=n(s,a);return r([i],async o=>{o?e.display===Cn&&e.removeProperty(Ln):e.setProperty(Ln,Cn)})}};var kn={type:"attribute",name:"text",keyReq:"denied",valReq:"must",onLoad:e=>{let{el:t,genRX:n,computed:r,effect:s}=e,{deps:a,rxFn:i}=n();t instanceof HTMLElement||E("TextInvalidElement",e);let o=r(a,i);return s([o],l=>{t.textContent=`${l}`})}};var Fn={type:"action",name:"setAll",fn:({batch:e},t,n)=>{e(()=>{let r=de(t);for(let s of r)G(s,n)})}};var Nn={type:"action",name:"toggleAll",fn:({batch:e},t)=>{e(()=>{let n=de(t);for(let r of n)G(r,!se(r))})}};var Vn={type:"attribute",name:"persist",keyReq:"denied",onLoad:({mods:e,value:t,batch:n})=>{let r=N,s=e.has("session")?sessionStorage:localStorage,a=t!==""?t:"**",i=()=>{let l=s.getItem(r)||"{}",c=JSON.parse(l);n(()=>{ie(c)})},o=()=>{let l=de(a),c=Je(!1,...l);s.setItem(r,JSON.stringify(c))};return i(),document.addEventListener(V,o),()=>{document.removeEventListener(V,o)}}};Pe(Bt,Xt,Jt,zt,Kt,pn,mn,gn,yn,Qt,bn,Sn,vn,En,Tn,An,xn,wn,Mn,Rn,Dn,Pn,kn,Fn,Nn,Vn);nt();export{nt as apply,Pe as load,Ot as setAlias};
//# sourceMappingURL=datastar.js.map
